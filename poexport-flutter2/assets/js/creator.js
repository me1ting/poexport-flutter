var Creator=function(){"use strict";
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function n(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(e,t){return null!=e&&"object"==typeof e&&t in e}var i=RegExp.prototype.test;var o=/\S/;function a(e){return!function(e,t){return i.call(e,t)}(o,e)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var l=/\s*/,u=/\s+/,d=/\s*=/,h=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function f(e){this.string=e,this.tail=e,this.pos=0}function m(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function g(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},f.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},m.prototype.push=function(e){return new m(e,this)},m.prototype.lookup=function(e){var t,r,i,o=this.cache;if(o.hasOwnProperty(e))t=o[e];else{for(var a,c,l,u=this,d=!1;u;){if(e.indexOf(".")>0)for(a=u.view,c=e.split("."),l=0;null!=a&&l<c.length;)l===c.length-1&&(d=s(a,c[l])||(r=a,i=c[l],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(i))),a=a[c[l++]];else a=u.view[e],d=s(u.view,e);if(d){t=a;break}u=u.parent}o[e]=t}return n(t)&&(t=t.call(this.view)),t},g.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},g.prototype.parse=function(e,n){var s=this.templateCache,i=e+":"+(n||v.tags).join(":"),o=void 0!==s,c=o?s.get(i):void 0;return null==c&&(c=function(e,n){if(!e)return[];var s,i,o,c=!1,m=[],g=[],y=[],w=!1,S=!1,I="",b=0;function k(){if(w&&!S)for(;y.length;)delete g[y.pop()];else y=[];w=!1,S=!1}function A(e){if("string"==typeof e&&(e=e.split(u,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(r(e[0])+"\\s*"),i=new RegExp("\\s*"+r(e[1])),o=new RegExp("\\s*"+r("}"+e[1]))}A(n||v.tags);for(var C,E,x,M,U,T,R=new f(e);!R.eos();){if(C=R.pos,x=R.scanUntil(s))for(var B=0,j=x.length;B<j;++B)a(M=x.charAt(B))?(y.push(g.length),I+=M):(S=!0,c=!0,I+=" "),g.push(["text",M,C,C+1]),C+=1,"\n"===M&&(k(),I="",b=0,c=!1);if(!R.scan(s))break;if(w=!0,E=R.scan(p)||"name",R.scan(l),"="===E?(x=R.scanUntil(d),R.scan(d),R.scanUntil(i)):"{"===E?(x=R.scanUntil(o),R.scan(h),R.scanUntil(i),E="&"):x=R.scanUntil(i),!R.scan(i))throw new Error("Unclosed tag at "+R.pos);if(U=">"==E?[E,x,C,R.pos,I,b,c]:[E,x,C,R.pos],b++,g.push(U),"#"===E||"^"===E)m.push(U);else if("/"===E){if(!(T=m.pop()))throw new Error('Unopened section "'+x+'" at '+C);if(T[1]!==x)throw new Error('Unclosed section "'+T[1]+'" at '+C)}else"name"===E||"{"===E||"&"===E?S=!0:"="===E&&A(x)}if(k(),T=m.pop())throw new Error('Unclosed section "'+T[1]+'" at '+R.pos);return function(e){for(var t,n=[],r=n,s=[],i=0,o=e.length;i<o;++i)switch((t=e[i])[0]){case"#":case"^":r.push(t),s.push(t),r=t[4]=[];break;case"/":s.pop()[5]=t[2],r=s.length>0?s[s.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],s=0,i=e.length;s<i;++s)(t=e[s])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(g))}(e,n),o&&s.set(i,c)),c},g.prototype.render=function(e,t,n,r){var s=this.getConfigTags(r),i=this.parse(e,s),o=t instanceof m?t:new m(t,void 0);return this.renderTokens(i,o,n,e,r)},g.prototype.renderTokens=function(e,t,n,r,s){for(var i,o,a,c="",l=0,u=e.length;l<u;++l)a=void 0,"#"===(o=(i=e[l])[0])?a=this.renderSection(i,t,n,r,s):"^"===o?a=this.renderInverted(i,t,n,r,s):">"===o?a=this.renderPartial(i,t,n,s):"&"===o?a=this.unescapedValue(i,t):"name"===o?a=this.escapedValue(i,t,s):"text"===o&&(a=this.rawValue(i)),void 0!==a&&(c+=a);return c},g.prototype.renderSection=function(e,r,s,i,o){var a=this,c="",l=r.lookup(e[1]);if(l){if(t(l))for(var u=0,d=l.length;u<d;++u)c+=this.renderTokens(e[4],r.push(l[u]),s,i,o);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)c+=this.renderTokens(e[4],r.push(l),s,i,o);else if(n(l)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(r.view,i.slice(e[3],e[5]),(function(e){return a.render(e,r,s,o)})))&&(c+=l)}else c+=this.renderTokens(e[4],r,s,i,o);return c}},g.prototype.renderInverted=function(e,n,r,s,i){var o=n.lookup(e[1]);if(!o||t(o)&&0===o.length)return this.renderTokens(e[4],n,r,s,i)},g.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),s=e.split("\n"),i=0;i<s.length;i++)s[i].length&&(i>0||!n)&&(s[i]=r+s[i]);return s.join("\n")},g.prototype.renderPartial=function(e,t,r,s){if(r){var i=this.getConfigTags(s),o=n(r)?r(e[1]):r[e[1]];if(null!=o){var a=e[6],c=e[5],l=e[4],u=o;0==c&&l&&(u=this.indentPartial(o,l,a));var d=this.parse(u,i);return this.renderTokens(d,t,r,u,s)}}},g.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},g.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||v.escape,s=t.lookup(e[1]);if(null!=s)return"number"==typeof s&&r===v.escape?String(s):r(s)},g.prototype.rawValue=function(e){return e[1]},g.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},g.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var v={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){y.templateCache=e},get templateCache(){return y.templateCache}},y=new g;v.clearCache=function(){return y.clearCache()},v.parse=function(e,t){return y.parse(e,t)},v.render=function(e,n,r,s){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+((t(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)'));var i;return y.render(e,n,r,s)},v.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return c[e]}))},v.Scanner=f,v.Context=m,v.Writer=g;class w{constructor(e,t,n){this.name=e,this.itemId=t,this.nodeId=n,this.active=!1}static NewEquipmentSlot(e,t){const n=new w(e,t,void 0);return n.name.startsWith("Flask ")&&(n.active=!0),n}static NewJewelSlot(e,t){return new w(e,void 0,t)}toString(){return v.render('<Slot {{#active}}active="{{active}}"{{/active}} name="{{name}}" {{#itemId}}itemId="{{itemId}}"{{/itemId}} {{#nodeId}}nodeId="{{nodeId}}"{{/nodeId}}/>',this)}}class S{constructor(){this.slots=[]}append(e){this.slots.push(e)}toString(){return v.render('<ItemSet useSecondWeaponSet="false" id="1">\n{{#slots}}\n{{.}}\n{{/slots}}\n</ItemSet>',this)}}const I=[{name:"Scion",ascendancies:["None","Ascendant"]},{name:"Marauder",ascendancies:["None","Juggernaut","Berserker","Chieftain"]},{name:"Ranger",ascendancies:["None","Raider","Deadeye","Pathfinder"]},{name:"Witch",ascendancies:["None","Occultist","Elementalist","Necromancer"]},{name:"Duelist",ascendancies:["None","Slayer","Gladiator","Champion"]},{name:"Templar",ascendancies:["None","Inquisitor","Hierophant","Guardian"]},{name:"Shadow",ascendancies:["None","Assassin","Trickster","Saboteur"]}];function b(e){for(let t=0;t<I.length;t++){if(I[t].name===e)return{classId:t,ascendancyId:0};const n=I[t].ascendancies;for(let r=1;r<n.length;r++)if(n[r]===e)return{classId:t,ascendancyId:r}}}function k(e){if(e){const t=e.match(/\d+/g);if(t)return Number(t[0])}}function A(e,t){let n=k(e);return n||(n=t),n}const C={0:"NORMAL",1:"MAGIC",2:"RARE",3:"UNIQUE",9:"RELIC",10:"RELIC"};const E={"Doppelgänger Guise":"Doppelganger Guise","Mjölner":"Mjolner"},x={"Maelström Staff":"Maelstrom Staff"};class M{constructor(e,t){this.id=e,this.json=t}viewModel(){var e,t,n,r,s,i,o,a,c,l,u,d,h,p;const f={},m=this.json;var g;if(f.rarity=(g=this.json.frameType,C[g]),m.name)E[m.name]&&(f.name=E[m.name]),x[m.baseType]&&(f.baseType=x[m.baseType]);else{const e=m.typeLine;for(let t in x)if(e.includes(t)){const n=x[t];f.typeLine=e.replace(t,n);break}}const v=new Map;m.properties&&m.properties.forEach((e=>v.set(e.name,e)));const y=null===(e=v.get("Quality"))||void 0===e?void 0:e.values[0][0];f.quality=k(y),f.evasionRating=null===(t=v.get("Evasion Rating"))||void 0===t?void 0:t.values[0][0],f.energyShield=null===(n=v.get("Energy Shield"))||void 0===n?void 0:n.values[0][0],f.armout=null===(r=v.get("Armour"))||void 0===r?void 0:r.values[0][0],f.ward=null===(s=v.get("Ward"))||void 0===s?void 0:s.values[0][0],f.radius=null===(i=v.get("Radius"))||void 0===i?void 0:i.values[0][0],f.limitedTo=null===(o=v.get("Limited to"))||void 0===o?void 0:o.values[0][0];const w=new Map;if(m.requirements&&m.requirements.forEach((e=>w.set(e.name,e))),f.requireClass=null===(a=w.get("Class:"))||void 0===a?void 0:a.values[0][0],f.enchantMods=null===(c=m.enchantMods)||void 0===c?void 0:c.map((e=>e.split("\n"))).flat(),f.implicitMods=null===(l=m.implicitMods)||void 0===l?void 0:l.map((e=>e.split("\n"))).flat(),f.explicitMods=null===(u=m.explicitMods)||void 0===u?void 0:u.map((e=>e.split("\n"))).flat(),f.craftedMods=null===(d=m.craftedMods)||void 0===d?void 0:d.map((e=>e.split("\n"))).flat(),f.fracturedMods=null===(h=m.fracturedMods)||void 0===h?void 0:h.map((e=>e.split("\n"))).flat(),f.crucibleMods=null===(p=m.crucibleMods)||void 0===p?void 0:p.map((e=>e.split("\n"))).flat(),m.sockets){const e=m.sockets,t=[e[0].sColour];for(let n=1;n<e.length;n++)t.push(e[n].group===e[n-1].group?"-":" "),t.push(e[n].sColour);f.sockets=t.join("")}let S=0;return f.enchantMods&&(S+=f.enchantMods.length),f.implicitMods&&(S+=f.implicitMods.length),f.implicitCount=S,Object.assign({},m,f)}toString(){const e=`<Item id="${this.id}">\nRarity: {{rarity}}\n{{#name}}\n{{name}}\n{{baseType}}\n{{/name}}\n{{^name}}\n{{typeLine}}\n{{/name}}\n{{#evasionRating}}\nEvasion: {{evasionRating}}\n{{/evasionRating}}\n{{#energyShield}}\nEnergy Shield: {{energyShield}}\n{{/energyShield}}\n{{#armout}}\nArmour: {{armout}}\n{{/armout}}\n{{#ward}}\nWard: {{ward}}\n{{/ward}}\nUnique ID: {{id}}\nItem Level: {{ilvl}}\n{{#quality}}\nQuality: {{quality}}\n{{/quality}}\n{{#sockets}}\nSockets: {{sockets}}\n{{/sockets}}\n{{#radius}}\nRadius: {{radius}}\n{{/radius}}\n{{#limitedTo}}\nLimited to: {{limitedTo}}\n{{/limitedTo}}\n{{#requireClass}}\nRequires Class {{requireClass}}\n{{/requireClass}}\nImplicits: {{implicitCount}}\n{{#enchantMods}}\n{crafted}{{.}}\n{{/enchantMods}}\n{{#implicitMods}}\n{{.}}\n{{/implicitMods}}\n{{#explicitMods}}\n{{.}}\n{{/explicitMods}}\n{{#fracturedMods}}\n{fractured}{{.}}\n{{/fracturedMods}}\n{{#craftedMods}}\n{crafted}{{.}}\n{{/craftedMods}}\n{{#crucibleMods}}\n{crucible}{{.}}\n{{/crucibleMods}}\n{{#shaper}}\nShaper Item\n{{/shaper}}\n{{#elder}}\nElder Item\n{{/elder}}\n{{#fractured}}\nFractured Item\n{{/fractured}}\n{{#synthesised}}\nFractured Item\n{{/synthesised}}\n</Item>`;return v.render(e,this.viewModel())}}class U{constructor(){this.itemList=[],this.itemSet=new S}toString(){const e=`<Items>\n{{#itemList}}\n{{.}}\n{{/itemList}}\n${this.itemSet}\n</Items>`;return v.render(e,this)}}class T{constructor(){this.level=0}toString(){return`<Build level="${this.level}" targetVersion="3_0" mainSocketGroup="1" viewMode="ITEMS">\n</Build>`}}class R{constructor(){this.skillSet=new B}toString(){return`<Skills activeSkillSet="1">\n${this.skillSet}\n</Skills>`}}class B{constructor(){this.skills=[]}toString(){return v.render('<SkillSet id="1">\n{{#skills}}\n{{toString}}\n{{/skills}}\n</SkillSet>',this)}}class j{constructor(e,t){this.slot="",this.gems=[],this.slot=e;for(const e of t)this.gems.push(new $(e))}toString(){return v.render('<Skill enabled="true" slot="{{slot}}" mainActiveSkill="nil">\n{{#gems}}\n{{.}}\n{{/gems}}\n</Skill>',this)}}class ${constructor(e){var t,n;this.level=20,this.qualityId="Default",this.quality=0,this.nameSpec="";const r=new Map;e.properties&&e.properties.forEach((e=>r.set(e.name,e))),this.level=A(null===(t=r.get("Level"))||void 0===t?void 0:t.values[0][0],20),this.quality=A(null===(n=r.get("Quality"))||void 0===n?void 0:n.values[0][0],0),this.nameSpec=e.baseType.replace(" Support","");const s=e.typeLine.match(O);s&&(this.qualityId=q[s[0]])}toString(){return v.render('<Gem level="{{level}}" qualityId="{{qualityId}}" quality="{{quality}}" enabled="true" nameSpec="{{nameSpec}}"/>',this)}}const q={"Anomalous ":"Alternate1","Divergent ":"Alternate2","Phantasmal ":"Alternate3"},O=new RegExp(`^${Object.getOwnPropertyNames(q).join("|")}`);class F{constructor(){this.spec=new L}toString(){return`<Tree activeSpec="1">\n${this.spec}\n</Tree>`}}class L{constructor(){this.treeVersion="3_22",this.ascendClassId=0,this.classId=0,this.masteryEffects=[],this.nodes=[],this.url=new V,this.sockets=new D,this.overrides=new W}viewModel(){const e={};return e.masteryEffectsView=this.masteryEffects.map((e=>e.toString())).join(","),e.nodesView=this.nodes.join(","),Object.assign({},this,e)}toString(){return v.render('<Spec treeVersion="{{treeVersion}}" ascendClassId="{{ascendClassId}}" classId="{{classId}}" masteryEffects="{{masteryEffectsView}}" nodes="{{nodesView}}">\n{{url}}\n{{sockets}}\n{{overrides}}\n</Spec>',this.viewModel())}}class N{constructor(e,t){this.nodeId=e,this.effectId=t}toString(){return`{${this.nodeId},${this.effectId}}`}}class V{constructor(){this.url=""}toString(){return""!==this.url?`<URL>\n${this.url}\n</URL>`:"<URL/>"}}class D{constructor(){this.sockets=[]}append(e){this.sockets.push(e)}toString(){return v.render("<Sockets>\n{{#sockets}}\n{{toString}}\n{{/sockets}}\n</Sockets>",this)}}class P{constructor(e,t){this.nodeId=0,this.itemId=0,this.nodeId=e,this.itemId=t}toString(){return`<Socket nodeId="${this.nodeId}" itemId="${this.itemId}"/>`}}class W{constructor(){this.members=[]}parse(e){this.members=[];for(const[t,n]of Object.entries(e))this.members.push(new _(t,n))}toString(){return v.render("<Overrides>\n{{#members}}\n{{.}}\n{{/members}}\n</Overrides>",this)}}class _{constructor(e,t){this.dn=t.name,this.icon=t.icon,this.nodeId=e,this.activeEffectImage=t.activeEffectImage,this.stats=t.stats}toString(){const e=`<Override dn="${this.dn}" icon="${this.icon}" nodeId="${this.nodeId}" activeEffectImage="${this.activeEffectImage}">\n{{#stats}}\n{{.}}\n{{/stats}}\n</Override>`;return v.render(e,this)}}class G{constructor(){this.build=new T,this.skills=new R,this.tree=new F,this.items=new U}toString(){return`<?xml version="1.0" encoding="UTF-8"?>\n<PathOfBuilding>\n${this.build}\n${this.skills}\n${this.tree}\n${this.items}\n</PathOfBuilding>`}}const z="3.7.5",Z=z,H="function"==typeof atob,Q="function"==typeof btoa,J="function"==typeof Buffer,K="function"==typeof TextDecoder?new TextDecoder:void 0,X="function"==typeof TextEncoder?new TextEncoder:void 0,Y=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),ee=(e=>{let t={};return e.forEach(((e,n)=>t[e]=n)),t})(Y),te=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ne=String.fromCharCode.bind(String),re="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),se=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")),ie=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),oe=e=>{let t,n,r,s,i="";const o=e.length%3;for(let o=0;o<e.length;){if((n=e.charCodeAt(o++))>255||(r=e.charCodeAt(o++))>255||(s=e.charCodeAt(o++))>255)throw new TypeError("invalid character found");t=n<<16|r<<8|s,i+=Y[t>>18&63]+Y[t>>12&63]+Y[t>>6&63]+Y[63&t]}return o?i.slice(0,o-3)+"===".substring(o):i},ae=Q?e=>btoa(e):J?e=>Buffer.from(e,"binary").toString("base64"):oe,ce=J?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let n=0,r=e.length;n<r;n+=4096)t.push(ne.apply(null,e.subarray(n,n+4096)));return ae(t.join(""))},le=(e,t=!1)=>t?se(ce(e)):ce(e),ue=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?ne(192|t>>>6)+ne(128|63&t):ne(224|t>>>12&15)+ne(128|t>>>6&63)+ne(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return ne(240|t>>>18&7)+ne(128|t>>>12&63)+ne(128|t>>>6&63)+ne(128|63&t)},de=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,he=e=>e.replace(de,ue),pe=J?e=>Buffer.from(e,"utf8").toString("base64"):X?e=>ce(X.encode(e)):e=>ae(he(e)),fe=(e,t=!1)=>t?se(pe(e)):pe(e),me=e=>fe(e,!0),ge=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,ve=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return ne(55296+(t>>>10))+ne(56320+(1023&t));case 3:return ne((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return ne((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},ye=e=>e.replace(ge,ve),we=e=>{if(e=e.replace(/\s+/g,""),!te.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,n,r,s="";for(let i=0;i<e.length;)t=ee[e.charAt(i++)]<<18|ee[e.charAt(i++)]<<12|(n=ee[e.charAt(i++)])<<6|(r=ee[e.charAt(i++)]),s+=64===n?ne(t>>16&255):64===r?ne(t>>16&255,t>>8&255):ne(t>>16&255,t>>8&255,255&t);return s},Se=H?e=>atob(ie(e)):J?e=>Buffer.from(e,"base64").toString("binary"):we,Ie=J?e=>re(Buffer.from(e,"base64")):e=>re(Se(e).split("").map((e=>e.charCodeAt(0)))),be=e=>Ie(Ae(e)),ke=J?e=>Buffer.from(e,"base64").toString("utf8"):K?e=>K.decode(Ie(e)):e=>ye(Se(e)),Ae=e=>ie(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),Ce=e=>ke(Ae(e)),Ee=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),xe=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,Ee(t));e("fromBase64",(function(){return Ce(this)})),e("toBase64",(function(e){return fe(this,e)})),e("toBase64URI",(function(){return fe(this,!0)})),e("toBase64URL",(function(){return fe(this,!0)})),e("toUint8Array",(function(){return be(this)}))},Me=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,Ee(t));e("toBase64",(function(e){return le(this,e)})),e("toBase64URI",(function(){return le(this,!0)})),e("toBase64URL",(function(){return le(this,!0)}))},Ue={version:z,VERSION:Z,atob:Se,atobPolyfill:we,btoa:ae,btoaPolyfill:oe,fromBase64:Ce,toBase64:fe,encode:fe,encodeURI:me,encodeURL:me,utob:he,btou:ye,decode:Ce,isValid:e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:le,toUint8Array:be,extendString:xe,extendUint8Array:Me,extendBuiltins:()=>{xe(),Me()}};function Te(e,t){v.escape=function(e){return e};const n=new G,r=n.build,s=e.character;r.level=s.level;let i=1;const o=function(e){const t=[];return t.push(...e.filter((e=>"MainInventory"!==e.inventoryId&&"THIEFS_TRINKET"!==e.baseType))),t}(e.items);for(const e of o){const t=new M(i++,e),r=n.items.itemList;r.push(t);const s=n.items.itemSet,o=Be(e),a=w.NewEquipmentSlot(o,t.id);if(s.append(a),a.itemId=t.id,e.socketedItems){const t=e.sockets,a=e.socketedItems;let c=[],l=0;const u=n.skills.skillSet.skills;for(let e=0;e<a.length;e++){const n=a[e];if(n.abyssJewel){const e=new M(i++,n);r.push(e);const t=`${o} Abyssal Socket ${n.socket+1}`,a=w.NewEquipmentSlot(t,e.id);s.append(a),a.itemId=e.id}else if(0==e)c.push(n),l=t[0].group;else{const r=t[e].group;r!==l?(u.push(new j(o,c)),l=r,c=[n]):c.push(n)}}c.length>0&&u.push(new j(o,c))}}const a=n.tree.spec;for(const e of t.items){const t=new M(i++,e);n.items.itemList.push(t);const r=new P((c=e.x,je[c]),t.id);a.sockets.append(r)}var c,l=b(s.class);void 0!==l&&(a.ascendClassId=l.ascendancyId,a.classId=l.classId);for(const[e,n]of Object.entries(t.mastery_effects))a.masteryEffects.push(new N(Number(e),n));return a.nodes=t.hashes,a.url.url=`https://www.pathofexile.com/passive-skill-tree/${function(e,t){const n=t.hashes;var r=b(e.class);void 0===r&&(r={classId:0,ascendancyId:0});const s=[0,0,0,6,r.classId,r.ascendancyId],i=[];for(const[e,n]of Object.entries(t.mastery_effects))i.push(n),i.push(Number(e));const o=new ArrayBuffer(s.length+1+2*n.length+2+2*i.length),a=new DataView(o);var c=0;for(const e of s)a.setUint8(c,e),c+=1;a.setUint8(c,n.length),c+=1;for(const e of n)a.setUint16(c,e),c+=2;a.setUint8(c++,0),a.setUint8(c++,i.length/2);for(const e of i)a.setUint16(c,e),c+=2;return Ue.fromUint8Array(new Uint8Array(o)).replaceAll("+","-").replaceAll("/","_")}(s,t)}`,a.overrides.parse(t.skill_overrides),n}const Re={Amulet:"Amulet",Belt:"Belt",BodyArmour:"Body Armour",Boots:"Boots",Gloves:"Gloves",Helm:"Helmet",Offhand:"Weapon 2",Offhand2:"Weapon 2 Swap",Ring:"Ring 1",Ring2:"Ring 2",Weapon:"Weapon 1",Weapon2:"Weapon 1 Swap"};function Be(e){const t=e.inventoryId;if("Flask"===t)return`Flask ${e.x+1}`;const n=Re[t];return n||t}const je=[26725,36634,33989,41263,60735,61834,31683,28475,6230,48768,34483,7960,46882,55190,61419,2491,54127,32763,26196,33631,21984,29712,48679,9408,12613,16218,2311,22994,40400,46393,61305,12161,3109,49080,17219,44169,24970,36931,14993,10532,23756,46519,23984,51198,61666,6910,49684,33753,18436,11150,22748,64583,61288,13170,9797,41876,59585];return{create:function(e,t){return Te(e,t).toString()}}}();
